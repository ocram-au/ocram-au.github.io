import{$,m4 as C,m5 as _,m6 as y,m7 as T,m8 as A,m9 as z,ma as B,mb as R,i1 as M,mc as k,md as I,me as P,mf as D,mg as j,mh as O,mi as F,mj as N,e as a,y as l,a as q,S as E,a2 as b}from"./index-D5ClABWK.js";function it(t){var r,n;const e="metric";if(t==null)return e;const i=t.map,o=(i&&"portalItem"in i?(r=i.portalItem)==null?void 0:r.portal:null)??$.getDefault();switch(((n=o.user)==null?void 0:n.units)??o.units){case e:return e;case"english":return"imperial"}return C(t.spatialReference)??e}function x(t,e,i,o=2,r="abbr"){return _(t,y(e,i).value,i,o,r)}function g(t,e,i,o=2,r="abbr"){return I(t,y(e,i).value,i,o,r)}function H(t,e,i=2,o="abbr"){return T(t,e.value,e.unit,i,o)}function J(t,e,i=2,o="abbr"){return P(t,e.value,e.unit,i,o)}function L(t,e,i=2,o="abbr"){return A(t,e.value,e.unit,i,o)}function U(t,e,i=2,o="abbr"){return D(t,e.value,e.unit,i,o)}function V(t,e,i=2,o="abbr"){return j(t,e.value,e.unit,i,o)}function Z(t,e,i=2,o="abbr"){return z(t,e.value,e.unit,i,o)}function G(t,e,i=2,o="abbr"){return O(t,e.value,e.unit,i,o)}function K(t,e,i=2,o="abbr"){return B(t,e.value,e.unit,i,o)}function Q(t,e,i=2,o="abbr"){return F(t,e.value,e.unit,i,o)}function W(t,e,i=2,o="abbr"){return N(t,e.value,e.unit,i,o)}function ot(t,e,i,o=M,r=!0){return R(t.value,t.unit,t.rotationType,e,i,o,r)}function rt(t,e,i){return k(t.value,t.unit,t.rotationType,e,i)}function nt(t,e,i,o,r="abbr"){switch(o=o??2,i){case"imperial":return Z(t,e,o,r);case"metric":return H(t,e,o,r);default:return x(t,e,i,o,r)}}function st(t,e,i,o=2,r="abbr"){switch(i){case"imperial":return G(t,e,o,r);case"metric":return J(t,e,o,r);default:return g(t,e,i,o,r)}}function at(t,e,i,o=2,r="abbr"){switch(i){case"imperial":return K(t,e,o,r);case"metric":return L(t,e,o,r);default:return x(t,e,i,o,r)}}function lt(t,e,i,o=2,r="abbr"){switch(i){case"imperial":return Q(t,e,o,r);case"metric":return U(t,e,o,r);default:return g(t,e,i,o,r)}}function ht(t,e,i,o=2,r="abbr"){switch(i){case"imperial":return W(t,e,o,r);case"metric":return V(t,e,o,r);default:return x(t,e,i,o,r)}}let X=t=>({vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}),v=(t,e,i)=>{for(let o=0,r=e.length;o<r;o++){let n=e[o];Array.isArray(n)?v(t,n,i):n!=null&&n!==!1&&(typeof n=="string"&&(n=X(n)),i.push(n))}};function Y(t,e,i){if(Array.isArray(e))i=e,e=void 0;else if(e&&(typeof e=="string"||e.hasOwnProperty("vnodeSelector"))||i&&(typeof i=="string"||i.hasOwnProperty("vnodeSelector")))throw new Error("h called with invalid arguments");let o,r;return i&&i.length===1&&typeof i[0]=="string"?o=i[0]:i&&(r=[],v(t,i,r),r.length===0&&(r=void 0)),{vnodeSelector:t,properties:e,children:r,text:o===""?void 0:o,domNode:null}}const m={bottom:"esri-text-overlay-item-anchor-bottom","bottom-right":"esri-text-overlay-item-anchor-bottom-right","bottom-left":"esri-text-overlay-item-anchor-bottom-left",top:"esri-text-overlay-item-anchor-top","top-right":"esri-text-overlay-item-anchor-top-right","top-left":"esri-text-overlay-item-anchor-top-left",center:"esri-text-overlay-item-anchor-center",right:"esri-text-overlay-item-anchor-right",left:"esri-text-overlay-item-anchor-left"};let s=class extends E{get position(){return[this.x,this.y]}set position(t){this._set("x",t[0]),this._set("y",t[1])}get _textShadowColor(){const{textColor:t,backgroundColor:e}=this,i=e.clone();return i.a*=t.a,i}get _textShadow(){const t=this._textShadowColor.toCss(!0);return`0 0 ${this._textShadowSize}px ${t}`}get padding(){return .5*this.fontSize}get _borderRadius(){return this.padding}constructor(t){super(t),this.x=0,this.y=0,this.text="-",this.fontSize=14,this.anchor="center",this.visible=!0,this.isDecoration=!0,this.backgroundColor=new b([0,0,0,.6]),this.textColor=new b([255,255,255]),this._textShadowSize=1}render(){return Y("div",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+"px",top:Math.floor(this.y)+"px",visibility:this.visible?"visible":"hidden",fontSize:this.fontSize+"px",lineHeight:this.fontSize+"px",backgroundColor:this.backgroundColor.toCss(!0),color:this.textColor.toCss(!0),padding:this.padding+"px",borderRadius:this._borderRadius+"px",textShadow:this._textShadow}},[this.text])}renderCanvas(t){if(!this.visible)return;const e=t.font.replace(/^(.*?)px/,"");t.font=`${this.fontSize}px ${e}`;const i=this.padding,o=this._borderRadius,r=t.measureText(this.text).width,n=this.fontSize,h=tt[this.anchor];t.textAlign="center",t.textBaseline="middle";const u=r+2*i,c=n+2*i,S=this.x+h.x*u,w=this.y+h.y*c;this._roundedRect(t,S,w,u,c,o),t.fillStyle=this.backgroundColor.toCss(!0),t.fill();const p=this.x+(h.x+.5)*u,f=this.y+(h.y+.5)*c;this._renderTextShadow(t,this.text,p,f),t.fillStyle=this.textColor.toCss(!0),t.fillText(this.text,p,f)}_renderTextShadow(t,e,i,o){t.lineJoin="miter",t.fillStyle=`rgba(${this._textShadowColor.r}, ${this._textShadowColor.g}, ${this._textShadowColor.b}, ${1/d.length})`;const r=this._textShadowSize;for(const[n,h]of d)t.fillText(e,i+r*n,o+r*h)}_roundedRect(t,e,i,o,r,n){t.beginPath(),t.moveTo(e,i+n),t.arcTo(e,i,e+n,i,n),t.lineTo(e+o-n,i),t.arcTo(e+o,i,e+o,i+n,n),t.lineTo(e+o,i+r-n),t.arcTo(e+o,i+r,e+o-n,i+r,n),t.lineTo(e+n,i+r),t.arcTo(e,i+r,e,i+r-n,n),t.closePath()}_cssClasses(){const t={"esri-text-overlay-item":!0};let e;for(e in m)t[m[e]]=this.anchor===e;return t}};a([l()],s.prototype,"x",void 0),a([l()],s.prototype,"y",void 0),a([l()],s.prototype,"position",null),a([l()],s.prototype,"text",void 0),a([l()],s.prototype,"fontSize",void 0),a([l()],s.prototype,"anchor",void 0),a([l()],s.prototype,"visible",void 0),a([l()],s.prototype,"isDecoration",void 0),a([l()],s.prototype,"backgroundColor",void 0),a([l()],s.prototype,"textColor",void 0),a([l()],s.prototype,"_textShadowSize",void 0),a([l()],s.prototype,"_textShadowColor",null),a([l()],s.prototype,"_textShadow",null),a([l()],s.prototype,"padding",null),a([l()],s.prototype,"_borderRadius",null),s=a([q("esri.views.overlay.TextOverlayItem")],s);const tt={bottom:{x:-.5,y:-1,textAlign:"center",textBaseline:"bottom"},"bottom-left":{x:0,y:-1,textAlign:"left",textBaseline:"bottom"},"bottom-right":{x:-1,y:-1,textAlign:"right",textBaseline:"bottom"},center:{x:-.5,y:-.5,textAlign:"center",textBaseline:"middle"},left:{x:0,y:-.5,textAlign:"left",textBaseline:"middle"},right:{x:-1,y:-.5,textAlign:"right",textBaseline:"middle"},top:{x:-.5,y:0,textAlign:"center",textBaseline:"top"},"top-left":{x:0,y:0,textAlign:"left",textBaseline:"top"},"top-right":{x:-1,y:0,textAlign:"right",textBaseline:"top"}},d=[];for(let e=0;e<360;e+=360/16)d.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)]);const ut=s;export{st as C,at as F,H as M,lt as S,ot as U,nt as a,it as e,x as g,K as j,ht as k,rt as q,Y as t,L as w,ut as x,Z as y};
