import{j2 as i,aB as s,e as u,A as c,W as p,j3 as f,a8 as l,j4 as d,j5 as g}from"./index--YEV5yv0.js";function m(t,e){const r=new i({enabled:!0,selfEnabled:!1,featureEnabled:!0,distance:e==null?void 0:e.distance,touchSensitivityMultiplier:(e==null?void 0:e.touchSensitivityMultiplier)??s.touchSensitivityMultiplier});return{...u(()=>{var n,a;return((a=(n=t.map)==null?void 0:n.allLayers)==null?void 0:a.toArray())??[]},n=>{r.featureSources=new p(n).map(a=>new f({layer:a}))},c),options:r}}const o=new Map;function w(t){if(!o.has(t)){const n=m(t,{distance:10}),a=y(t,n.options);o.set(t,{referenceCount:0,snappingManager:a,remove:()=>{n.remove(),a.destroy()}})}const e=o.get(t);e.referenceCount++;const r=l(()=>v(t,e));return{snappingManager:e.snappingManager,...r}}function v(t,e){e.referenceCount--,e.referenceCount>0||g(()=>{e.referenceCount===0&&(e.remove(),o.delete(t))})}function y(t,e){return new d({view:t,options:e})}export{w as a};
