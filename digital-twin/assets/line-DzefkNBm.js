import{e7 as T,e8 as E,b$ as w,e9 as I,bF as c,c0 as f,ea as F,bN as R,eb as g,ec as A,ed as d,ee as b,aw as D,ef as O}from"./index--YEV5yv0.js";function $(t,e,a=null){const n=[],l=e.mapPositions;m(e,n);const o=n[0][1].data,u=n[0][1].indices.length,r=E(u);return y(e,n,r),U(e,n,r),v(e,n,r),S(e,n,r),C(e,n,r),N(e,n,r),z(e,n,o),new w(t,n,l,I.Line,a)}function m(t,e){const{attributeData:{position:a},removeDuplicateStartEnd:n}=t,l=L(a)&&n,o=a.length/3-(l?1:0),u=new Array(2*(o-1)),r=l?a.slice(0,-3):a;let i=0;for(let h=0;h<o-1;h++)u[i++]=h,u[i++]=h+1;e.push([c.POSITION,new f(r,u,3,l)])}function y(t,e,a){if(t.attributeData.colorFeature!=null)return;const n=t.attributeData.color;e.push([c.COLOR,new f(n??F,a,4)])}function v(t,e,a){t.attributeData.normal&&e.push([c.NORMAL,new f(t.attributeData.normal,a,3)])}function S(t,e,a){t.attributeData.colorFeature!=null&&e.push([c.COLORFEATUREATTRIBUTE,new f([t.attributeData.colorFeature],a,1,!0)])}function U(t,e,a){t.attributeData.sizeFeature==null&&e.push([c.SIZE,new f([t.attributeData.size??1],a,1,!0)])}function C(t,e,a){t.attributeData.sizeFeature!=null&&e.push([c.SIZEFEATUREATTRIBUTE,new f([t.attributeData.sizeFeature],a,1,!0)])}function N(t,e,a){t.attributeData.opacityFeature!=null&&e.push([c.OPACITYFEATUREATTRIBUTE,new f([t.attributeData.opacityFeature],a,1,!0)])}function z(t,e,a){if(t.overlayInfo==null||t.overlayInfo.renderCoordsHelper.viewingMode!==R.Global||!t.overlayInfo.spatialReference.isGeographic)return;const n=T(a.length),l=g(t.overlayInfo.spatialReference);for(let s=0;s<n.length;s+=3)A(a,s,n,s,l);const o=a.length/3,u=d(o+1);let r=B,i=G,h=0,p=0;b(r,n[p++],n[p++]),p++,u[0]=0;for(let s=1;s<o+1;++s)s===o&&(p=0),b(i,n[p++],n[p++]),p++,h+=O(r,i),u[s]=h,[r,i]=[i,r];e.push([c.DISTANCETOSTART,new f(u,e[0][1].indices,1,!0)])}function L(t){const e=t.length;return t[0]===t[e-3]&&t[1]===t[e-2]&&t[2]===t[e-1]}const B=D(),G=D();function j(t,e){if(t==null||t.length===0)return[];const a=[];return t.forEach(n=>{const l=n.length,o=T(3*l);n.forEach((r,i)=>{o[3*i]=r[0],o[3*i+1]=r[1],o[3*i+2]=r[2]});const u={attributeData:{position:o,normal:e},removeDuplicateStartEnd:!1};a.push(u)}),a}export{j as R,$ as b};
