const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/geodesicBufferOperator-9imclKK0.js","assets/index-BGUxYM9l.js","assets/index-C0kMKE5c.css","assets/operatorGeodesicBuffer-BSgMSdym.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/geodeticCurveType-CirnHLSB.js"])))=>i.map(i=>d[i]);
import{g5 as O,aP as R,qb as Z,c2 as _,mS as E,dc as ee,gt as te,mR as ne,t8 as re,cg as ie,t9 as se,f1 as ae,eu as oe,da as S,pb as le,f7 as ue,fQ as M,_ as pe,dB as L,F as me,dA as C,dC as ye,cy as ce,ei as $,cR as k,r as i,m as o,cS as f,a as g,fe as w,ta as J,hL as T,dQ as de}from"./index-BGUxYM9l.js";import{t as V}from"./json-Wa8cmqdu.js";const j=[0,0];function Q(e,t){if(!t)return null;if("x"in t){const n={x:0,y:0};return[n.x,n.y]=e(t.x,t.y,j),t.z!=null&&(n.z=t.z),t.m!=null&&(n.m=t.m),n}if("xmin"in t){const n={xmin:0,ymin:0,xmax:0,ymax:0};return[n.xmin,n.ymin]=e(t.xmin,t.ymin,j),[n.xmax,n.ymax]=e(t.xmax,t.ymax,j),t.hasZ&&(n.zmin=t.zmin,n.zmax=t.zmax,n.hasZ=!0),t.hasM&&(n.mmin=t.mmin,n.mmax=t.mmax,n.hasM=!0),n}return"rings"in t?{rings:A(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:A(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:G(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:null}function A(e,t){const n=[];for(const r of e)n.push(G(r,t));return n}function G(e,t){const n=[];for(const r of e){const s=t(r[0],r[1],[0,0]);n.push(s),r.length>2&&s.push(r[2]),r.length>3&&s.push(r[3])}return n}async function W(e,t){if(!e||!t)return;const n=Array.isArray(e)?e.map(r=>r.geometry!=null?r.geometry.spatialReference:null).filter(ee):[e];await te(n.map(r=>({source:r,dest:t})))}const K=Q.bind(null,ne),H=Q.bind(null,re);function X(e,t,n,r){if(!e)return null;if(n||(n=t,t=e.spatialReference),!O(t)||!O(n)||R(t,n))return e;if(Z(t,n)){const s=_(n)?K(e):H(e);return s.spatialReference=n,s}return E(V,[e],t,n,null,r)[0]}class fe{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(t,n,r,s){if(!(t!=null&&t.length)||!n||!r||R(n,r))return t;const l={geometries:t,inSpatialReference:n,outSpatialReference:r,geographicTransformation:s,resolve:ie()};return this._jobs.push(l),this._timer??(this._timer=setTimeout(this._process,10)),l.resolve.promise}_process(){this._timer=null;const t=this._jobs.shift();if(!t)return;const{geometries:n,inSpatialReference:r,outSpatialReference:s,resolve:l,geographicTransformation:u}=t;Z(r,s)?_(s)?l(n.map(K)):l(n.map(H)):l(E(V,n,r,s,u,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const he=new fe;function De(e,t,n,r){return he.push(e,t,n,r)}const ve=new S({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),z=Object.freeze({}),ge="frequency";async function Oe(e,t,n){var s,l;const r=e.bin;return r.onField&&(r.onField=r.onField.trim()),(s=r.onExpression)!=null&&s.value&&(r.onExpression.value=r.onExpression.value.trim()),r.splitBy&&(r.splitBy.value&&(r.splitBy.value=r.splitBy.value.trim()),r.splitBy.outAlias&&(r.splitBy.outAlias=r.splitBy.outAlias.trim())),r.stackBy&&(r.stackBy.value&&(r.stackBy.value=r.stackBy.value.trim()),r.stackBy.outAlias&&(r.stackBy.outAlias=r.stackBy.outAlias.trim())),"normalizationField"in r.parameters&&r.parameters.normalizationField&&(r.parameters.normalizationField=r.parameters.normalizationField.trim()),(l=e.outStatistics)!=null&&l.length||(e.outStatistics=[{statisticType:"count",onStatisticField:"1",outStatisticFieldName:ge}]),xe(e,t,n)}async function xe(e,t,n){const{outFields:r,orderByFields:s,groupByFieldsForStatistics:l,outStatistics:u}=e;if(r)for(let a=0;a<r.length;a++)r[a]=r[a].trim();if(s)for(let a=0;a<s.length;a++)s[a]=s[a].trim();if(l)for(let a=0;a<l.length;a++)l[a]=l[a].trim();if(u)for(let a=0;a<u.length;a++)u[a].onStatisticField&&(u[a].onStatisticField=u[a].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),we(e,t,n)}async function we(e,t,n){var l;if(!e)return null;let{where:r}=e;if(e.where=r=r==null?void 0:r.trim(),(!r||/^1 *= *1$/.test(r)||t&&t===r)&&(e.where=null),!e.geometry)return e;let s=await Se(e);if(e.distance=0,e.units=null,e.spatialRel==="esriSpatialRelEnvelopeIntersects"){const{spatialReference:u}=e.geometry;s=se(s),s.spatialReference=u}if(s){await W(s.spatialReference,n),s=Be(s,n);const u=(await ae(oe(s)))[0];if(u==null)throw z;const a="quantizationParameters"in e&&((l=e.quantizationParameters)==null?void 0:l.tolerance)||"maxAllowableOffset"in e&&e.maxAllowableOffset||0,x=a&&Y(s,n)?{densificationStep:8*a}:void 0,D=u.toJSON(),b=X(D,D.spatialReference,n,x);if(!b)throw z;b.spatialReference=n,e.geometry=b}return e}function Y(e,t){if(!e)return!1;const n=e.spatialReference;return(C(e)||L(e)||ye(e))&&!R(n,t)&&!ce(n,t)}function Be(e,t){const n=e.spatialReference;return Y(e,t)&&C(e)?{spatialReference:n,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}:e}async function Se(e){const{distance:t,units:n}=e,r=e.geometry;if(t==null||"vertexAttributes"in r)return r;const s=r.spatialReference,l=n?ve.fromJSON(n):le(s),u=s&&(ue(s)||_(s))?r:await W(s,M).then(()=>X(r,M)),a=await pe(()=>import("./geodesicBufferOperator-9imclKK0.js"),__vite__mapDeps([0,1,2,3,4,5]));await a.load();const x=a.execute(u,t||1,{unit:l})??void 0;if(!x||!L(x)||x.rings.length===0)throw new me("unsupported-query:invalid-parameters","Invalid parameters for query by distance");return x}function Me(e,t){return e==null?null:typeof e=="string"?t?new Date(`1970-01-01T${e}Z`).getTime():new Date(e).getTime():e instanceof Date?e.getTime():e}const Te=new S({esriFieldTypeInteger:"integer",esriFieldTypeString:"string"});let y=class extends $.ClonableMixin(k){constructor(t){super(t),this.alias=null,this.responseType=null,this.type=null,this.value=null,this.valueType=null}};i([o({type:String,json:{name:"outAlias",write:!0}})],y.prototype,"alias",void 0),i([o({type:String})],y.prototype,"responseType",void 0),i([o({type:String,json:{write:!0}})],y.prototype,"type",void 0),i([o({type:String,json:{write:!0}})],y.prototype,"value",void 0),i([f(Te)],y.prototype,"valueType",void 0),y=i([g("esri.rest.support.AttributeBinsGrouping")],y);const B=y;y.from=w(y);const Fe=new S({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeDate:"date",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"}),be=new S({naturalLog:"natural-log",squareRoot:"square-root"});let m=class extends $.ClonableMixin(k){constructor(e){super(e),this.expression=null,this.expressionValueType=null,this.field=null,this.firstDayOfWeek=null,this.hideUpperBound=null,this.splitBy=null,this.stackBy=null,this.transformation=null}};i([o({type:String,json:{name:"onExpression.value",write:!0}})],m.prototype,"expression",void 0),i([f(Fe,{name:"onExpression.valueType"})],m.prototype,"expressionValueType",void 0),i([o({type:String,json:{name:"onField",write:!0}})],m.prototype,"field",void 0),i([o({type:String,json:{write:!0}})],m.prototype,"firstDayOfWeek",void 0),i([o({type:String,json:{write:!0}})],m.prototype,"hideUpperBound",void 0),i([o({type:B,json:{write:{overridePolicy(){var e,t;return{enabled:((e=this.splitBy)==null?void 0:e.value)!=null||((t=this.splitBy)==null?void 0:t.type)!=null}}}}})],m.prototype,"splitBy",void 0),i([o({type:B,json:{write:{target:{stackBy:{type:B},jsonStyle:{type:String}},writer:(e,t)=>{e&&(t.stackBy=e.toJSON(),e.responseType!=null&&(t.jsonStyle=e.responseType))},overridePolicy(){var e,t;return{enabled:((e=this.stackBy)==null?void 0:e.value)!=null||((t=this.stackBy)==null?void 0:t.type)!=null}}},read:{source:["stackBy","jsonStyle"],reader:(e,t)=>B.fromJSON({...t.stackBy,responseType:t.jsonStyle})}}})],m.prototype,"stackBy",void 0),i([f(be)],m.prototype,"transformation",void 0),m=i([g("esri.rest.support.BinParametersBase")],m);const F=m;function I(e,t,n){T(n,e instanceof Date?e.getTime():e,t)}let c=class extends J(F){constructor(t){super(t),this.numBins=null,this.end=null,this.start=null,this.type="auto-interval"}};i([o({type:Number,json:{name:"parameters.numberOfBins",write:!0}})],c.prototype,"numBins",void 0),i([o({json:{name:"parameters.end",write:{writer:I}}})],c.prototype,"end",void 0),i([o({json:{name:"parameters.start",write:{writer:I}}})],c.prototype,"start",void 0),i([f({autoIntervalBin:"auto-interval"},{readOnly:!0})],c.prototype,"type",void 0),c=i([g("esri.rest.support.AutoIntervalBinParameters")],c);const Ie=c;c.from=w(c);const je=de()({year:"years",quarter:"quarters",month:"months",week:"weeks",day:"days",hour:"hours",minute:"minutes",second:"seconds"});let h=class extends $.ClonableMixin(k){constructor(t){super(t),this.value=null,this.unit=null}};i([o({type:Number,json:{name:"number",write:!0}})],h.prototype,"value",void 0),i([f(je)],h.prototype,"unit",void 0),h=i([g("esri.rest.support.DateBinTimeInterval")],h);const P=h;h.from=w(h);function N(e,t,n){T(n,typeof e=="string"?e:e==null?void 0:e.getTime(),t)}function q(e,t){const n=e.parameters[t];return n?typeof n=="string"?n:new Date(n):null}let p=class extends F{constructor(t){super(t),this.end=null,this.interval=null,this.offset=null,this.returnFullIntervalBin=null,this.start=null,this.snapToData=null,this.type="date"}};i([o({cast:e=>e!=null?typeof e=="string"?e:new Date(e):null,json:{name:"parameters.end",read:{reader:(e,t)=>q(t,"end")},write:{writer:N}}})],p.prototype,"end",void 0),i([o({type:P,json:{name:"parameters",write:!0}})],p.prototype,"interval",void 0),i([o({type:P,json:{name:"parameters.offset",write:!0}})],p.prototype,"offset",void 0),i([o({type:Boolean,json:{name:"parameters.returnFullIntervalBin",write:!0}})],p.prototype,"returnFullIntervalBin",void 0),i([o({cast:e=>e!=null?typeof e=="string"?e:new Date(e):null,json:{name:"parameters.start",read:{reader:(e,t)=>q(t,"start")},write:{writer:N}}})],p.prototype,"start",void 0),i([o({type:String,json:{name:"parameters.snapToData",write:!0}})],p.prototype,"snapToData",void 0),i([f({dateBin:"date"},{readOnly:!0})],p.prototype,"type",void 0),p=i([g("esri.rest.support.DateBinParameters")],p);const qe=p;p.from=w(p);function Re(e){return e[0]instanceof Date}function _e(e,t,n){T(n,e&&Re(e)?e.map(r=>r.getTime()):e,t)}let v=class extends F{constructor(t){super(t),this.boundaries=[],this.type="fixed-boundaries"}};i([o({json:{name:"parameters.boundaries",write:{writer:_e}}})],v.prototype,"boundaries",void 0),i([f({fixedBoundariesBin:"fixed-boundaries"},{readOnly:!0})],v.prototype,"type",void 0),v=i([g("esri.rest.support.FixedBoundariesBinParameters")],v);const Ze=v;v.from=w(v);function U(e,t,n){T(n,e instanceof Date?e.getTime():e,t)}let d=class extends J(F){constructor(e){super(e),this.end=null,this.interval=null,this.start=null,this.type="fixed-interval"}};i([o({json:{name:"parameters.end",write:{writer:U}}})],d.prototype,"end",void 0),i([o({type:Number,json:{name:"parameters.interval",write:!0}})],d.prototype,"interval",void 0),i([o({json:{name:"parameters.start",write:{writer:U}}})],d.prototype,"start",void 0),i([f({fixedIntervalBin:"fixed-interval"},{readOnly:!0})],d.prototype,"type",void 0),d=i([g("esri.rest.support.FixedIntervalBinParameters")],d);const Ee=d;d.from=w(d);export{we as B,z as S,Ie as a,F as b,Ee as c,xe as d,De as e,ve as g,Me as h,X as j,Ze as m,qe as u,Oe as w,W as x};
